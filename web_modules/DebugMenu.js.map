{"version":3,"file":"DebugMenu.js","sources":["../../../src/UX/debug/DebugMenu.ts"],"sourcesContent":["import Tweakpane from 'tweakpane';\nimport {Viewport} from '../../renderer/Viewport';\nimport {FolderApi} from 'tweakpane/dist/types/api/folder';\nimport {Layer} from '../../graph/Layer';\nimport {Gravity} from '../../graph/edges/gravity/Gravity';\nimport {kButton2Index} from '../mouse/MouseHandler';\n\nexport class DebugMenu {\n    private viewport: Viewport;\n    private pane: Tweakpane;\n    private uxFolder: FolderApi;\n\n    constructor(viewport: Viewport) {\n        this.viewport = viewport;\n\n        const layers = viewport.graph.layers;\n        this.pane = new Tweakpane({ title: 'Debug Menu', expanded: false });\n        for (let i = 0, n = layers.length; i < n; ++i) {\n            const layer = layers[i];\n            const layerFolder = this.pane.addFolder({ title: layer.name, expanded: false });\n            this.addLayerOptions(layerFolder, layer);\n        }\n\n        this.uxFolder = null;\n\n        this.pane.on('change', ()=> {\n            this.viewport.render();\n        });\n    }\n\n    public registerUX(ux: {[key: string]: any}): void {\n        if (!this.uxFolder) {\n            this.uxFolder = this.pane.addFolder({ title: 'UX', expanded: false });\n        }\n\n        const folder = this.uxFolder.addFolder({ title: ux.constructor.name, expanded: false });\n        folder.addInput(ux, 'enabled');\n\n        if ('button' in ux) {\n            const keys = Object.keys(kButton2Index);\n            const options = {};\n            for (let i = 0, n = keys.length; i < n; ++i) {\n                options[keys[i]] = keys[i];\n            }\n            folder.addInput(ux, 'button', { options });\n        }\n\n        if ('speed' in ux) {\n            folder.addInput(ux, 'speed', { min: -100, max: 100 });\n        }\n    }\n\n    private addLayerOptions(folder: FolderApi, layer: Layer): void {\n        folder.addInput(layer, 'enabled');\n        folder.addInput(layer, 'nearDepth', { min: 0, max: 1, label: 'near' });\n        folder.addInput(layer, 'farDepth', { min: 0, max: 1, label: 'far' });\n\n        if (layer.nodes) {\n            const nodesFolder = folder.addFolder({title: 'Nodes', expanded: false});\n            this.addNodesOptions(nodesFolder, layer);\n        }\n\n        if (layer.edges) {\n            const edgesFolder = folder.addFolder({ title: 'Edges', expanded: false });\n            this.addEdgesOptions(edgesFolder, layer);\n        }\n    }\n\n    private addNodesOptions(folder: FolderApi, layer: Layer): void {\n        const nodes = layer.nodes;\n        folder.addInput(nodes, 'enabled');\n        folder.addInput(nodes, 'pixelSizing', { label: 'pixel sizing ' });\n        folder.addInput(nodes, 'billboard', { label: 'billboarding' });\n        folder.addInput(nodes, 'minSize', { label: 'min size' });\n        folder.addInput(nodes, 'maxSize', { label: 'max size' });\n        folder.addInput(layer, 'nodesNearDepth', { min: 0, max: 1, label: 'near' });\n        folder.addInput(layer, 'nodesFarDepth', { min: 0, max: 1, label: 'far' });\n    }\n\n    private addEdgesOptions(folder: FolderApi, layer: Layer): void {\n        const edges = layer.edges;\n        folder.addInput(edges, 'enabled');\n        folder.addInput(edges, 'alpha', { min: 0, max: 1 });\n        folder.addInput(layer, 'edgesNearDepth', { min: 0, max: 1, label: 'near' });\n        folder.addInput(layer, 'edgesFarDepth', { min: 0, max: 1, label: 'far' });\n        if (edges instanceof Gravity) {\n            folder.addInput(edges, 'gravity', { min: -2, max: 2 });\n        }\n    }\n}\n"],"names":[],"mappings":"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"}